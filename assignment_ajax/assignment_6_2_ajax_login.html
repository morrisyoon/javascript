<html>
<head>
<title>login using AJAX &amp; text data</title>
<script type="text/javascript">

// Morris Yoon A00914105

window.onload=function(){
	document.forms[0].onsubmit=function(){
		checkUser();
		return false;
	}
}
function checkUser()
{
var xmlhttp;
var txt,xx,x,i;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    x=xmlhttp.responseText.split('\n');
    sw=0;
    for (i=0;i<x.length;i++)
      {
    xx=x[i].split(',');
    if ((document.getElementById('name').value==xx[0])&&(document.getElementById('pwd').value==xx[1].trim()))
    	{
			document.getElementById("login").innerHTML="Welcome "+xx[0]+"!";
			sw=1;
		}
            
        
      }
    if (sw==0) {
			alert(" you are not valid user. try again.");
    }
    }
  }
xmlhttp.open("GET",'passwords.txt',true);
xmlhttp.send();
}
//-->
</script>
<style>
span {color:#f00;}
</style>
</head>
<body>
<div id="login">
<h1>LOG IN</h1>
<form action="x.php">
username : <input type="text" id="name"><br /><br />
pasword : <input type="password" id="pwd"><br /><br />
	<input type="submit">
</form>
</div>
</body>
</html>